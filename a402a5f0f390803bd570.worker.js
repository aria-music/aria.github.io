(function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"===typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="/",t(t.s="cf80")})({"3e8f":function(n,e){},8483:function(n,e,t){"use strict";(function(n,r){var o=function(){var e="https://gaiji.pro/opus/opus.js";return function(o){o=o||{};o="undefined"!==typeof o?o:{};var i,u={};for(i in o)o.hasOwnProperty(i)&&(u[i]=o[i]);o["arguments"]=[],o["thisProgram"]="./this.program",o["quit"]=function(n,e){throw e},o["preRun"]=[],o["postRun"]=[];var a=!1,f=!1,c=!1,s=!1,l=!1;a="object"===typeof window,f="function"===typeof importScripts,s="object"===typeof n&&"object"===typeof n.versions&&"string"===typeof n.versions.node,c=s&&!a&&!f,l=!a&&!c&&!f;var p,d,y="";function h(n){return o["locateFile"]?o["locateFile"](n,y):y+n}c?(y=r+"/",o["read"]=function(n,e){var r;return p||(p=t("3e8f")),d||(d=t("df7c")),n=d["normalize"](n),r=p["readFileSync"](n),e?r:r.toString()},o["readBinary"]=function(n){var e=o["read"](n,!0);return e.buffer||(e=new Uint8Array(e)),A(e.buffer),e},n["argv"].length>1&&(o["thisProgram"]=n["argv"][1].replace(/\\/g,"/")),o["arguments"]=n["argv"].slice(2),n["on"]("uncaughtException",(function(n){if(!(n instanceof Cn))throw n})),n["on"]("unhandledRejection",xn),o["quit"]=function(e){n["exit"](e)},o["inspect"]=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(o["read"]=function(n){return read(n)}),o["readBinary"]=function(n){var e;return"function"===typeof readbuffer?new Uint8Array(readbuffer(n)):(e=read(n,"binary"),A("object"===typeof e),e)},"undefined"!=typeof scriptArgs?o["arguments"]=scriptArgs:"undefined"!=typeof arguments&&(o["arguments"]=arguments),"function"===typeof quit&&(o["quit"]=function(n){quit(n)})):(a||f)&&(f?y=self.location.href:document.currentScript&&(y=document.currentScript.src),e&&(y=e),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",o["read"]=function(n){var e=new XMLHttpRequest;return e.open("GET",n,!1),e.send(null),e.responseText},f&&(o["readBinary"]=function(n){var e=new XMLHttpRequest;return e.open("GET",n,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o["readAsync"]=function(n,e,t){var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?e(r.response):t()},r.onerror=t,r.send(null)},o["setWindowTitle"]=function(n){document.title=n});var m=o["print"]||("undefined"!==typeof console?console.log.bind(console):"undefined"!==typeof print?print:null),g=o["printErr"]||("undefined"!==typeof printErr?printErr:"undefined"!==typeof console&&console.warn.bind(console)||m);for(i in u)u.hasOwnProperty(i)&&(o[i]=u[i]);u=void 0;var v,b={"f64-rem":function(n,e){return n%e},debugger:function(){}};new Array(0);"object"!==typeof WebAssembly&&g("no native wasm support detected");var w=!1;function A(n,e){n||xn("Assertion failed: "+e)}function S(n){var e=o["_"+n];return A(e,"Cannot call unknown function "+n+", make sure it is exported"),e}function T(n,e,t,r,o){var i={string:function(n){var e=0;if(null!==n&&void 0!==n&&0!==n){var t=1+(n.length<<2);e=Rn(t),M(n,e,t)}return e},array:function(n){var e=Rn(n.length);return C(n,e),e}};function u(n){return"string"===e?R(n):"boolean"===e?Boolean(n):n}var a=S(n),f=[],c=0;if(r)for(var s=0;s<r.length;s++){var l=i[t[s]];l?(0===c&&(c=Mn()),f[s]=l(r[s])):f[s]=r[s]}var p=a.apply(null,f);return p=u(p),0!==c&&kn(c),p}var _="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function E(n,e,t){var r=e+t,o=e;while(n[o]&&!(o>=r))++o;if(o-e>16&&n.subarray&&_)return _.decode(n.subarray(e,o));var i="";while(e<o){var u=n[e++];if(128&u){var a=63&n[e++];if(192!=(224&u)){var f=63&n[e++];if(u=224==(240&u)?(15&u)<<12|a<<6|f:(7&u)<<18|a<<12|f<<6|63&n[e++],u<65536)i+=String.fromCharCode(u);else{var c=u-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&u)<<6|a)}else i+=String.fromCharCode(u)}return i}function R(n,e){return n?E(j,n,e):""}function k(n,e,t,r){if(!(r>0))return 0;for(var o=t,i=t+r-1,u=0;u<n.length;++u){var a=n.charCodeAt(u);if(a>=55296&&a<=57343){var f=n.charCodeAt(++u);a=65536+((1023&a)<<10)|1023&f}if(a<=127){if(t>=i)break;e[t++]=a}else if(a<=2047){if(t+1>=i)break;e[t++]=192|a>>6,e[t++]=128|63&a}else if(a<=65535){if(t+2>=i)break;e[t++]=224|a>>12,e[t++]=128|a>>6&63,e[t++]=128|63&a}else{if(t+3>=i)break;e[t++]=240|a>>18,e[t++]=128|a>>12&63,e[t++]=128|a>>6&63,e[t++]=128|63&a}}return e[t]=0,t-o}function M(n,e,t){return k(n,j,e,t)}"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function C(n,e){x.set(n,e)}var L,x,j,O,F=65536;function P(n,e){return n%e>0&&(n+=e-n%e),n}function I(){o["HEAP8"]=x=new Int8Array(L),o["HEAP16"]=new Int16Array(L),o["HEAP32"]=O=new Int32Array(L),o["HEAPU8"]=j=new Uint8Array(L),o["HEAPU16"]=new Uint16Array(L),o["HEAPU32"]=new Uint32Array(L),o["HEAPF32"]=new Float32Array(L),o["HEAPF64"]=new Float64Array(L)}var W=5275104,D=32192,B=5242880,H=o["TOTAL_MEMORY"]||16777216;function U(n){while(n.length>0){var e=n.shift();if("function"!=typeof e){var t=e.func;"number"===typeof t?void 0===e.arg?o["dynCall_v"](t):o["dynCall_vi"](t,e.arg):t(void 0===e.arg?null:e.arg)}else e()}}H<B&&g("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+H+"! (TOTAL_STACK="+B+")"),v=o["wasmMemory"]?o["wasmMemory"]:new WebAssembly.Memory({initial:H/F}),v&&(L=v.buffer),H=L.byteLength,I(),O[D>>2]=W;var V=[],q=[],z=[],K=[];function N(){if(o["preRun"]){"function"==typeof o["preRun"]&&(o["preRun"]=[o["preRun"]]);while(o["preRun"].length)Z(o["preRun"].shift())}U(V)}function G(){!0,U(q)}function X(){U(z)}function Y(){if(o["postRun"]){"function"==typeof o["postRun"]&&(o["postRun"]=[o["postRun"]]);while(o["postRun"].length)$(o["postRun"].shift())}U(K)}function Z(n){V.unshift(n)}function $(n){K.unshift(n)}var J=0,Q=null,nn=null;function en(n){J++,o["monitorRunDependencies"]&&o["monitorRunDependencies"](J)}function tn(n){if(J--,o["monitorRunDependencies"]&&o["monitorRunDependencies"](J),0==J&&(null!==Q&&(clearInterval(Q),Q=null),nn)){var e=nn;nn=null,e()}}o["preloadedImages"]={},o["preloadedAudios"]={};var rn="data:application/octet-stream;base64,";function on(n){return String.prototype.startsWith?n.startsWith(rn):0===n.indexOf(rn)}var un="opus.wasm";function an(){try{if(o["wasmBinary"])return new Uint8Array(o["wasmBinary"]);if(o["readBinary"])return o["readBinary"](un);throw"both async and sync fetching of the wasm failed"}catch(g){xn(g)}}function fn(){return o["wasmBinary"]||!a&&!f||"function"!==typeof fetch?new Promise((function(n,e){n(an())})):fetch(un,{credentials:"same-origin"}).then((function(n){if(!n["ok"])throw"failed to load wasm binary file at '"+un+"'";return n["arrayBuffer"]()})).catch((function(){return an()}))}function cn(n){var e={env:n,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:b};function t(n,e){var t=n.exports;o["asm"]=t,tn("wasm-instantiate")}function r(n){t(n["instance"])}function i(n){return fn().then((function(n){return WebAssembly.instantiate(n,e)})).then(n,(function(n){g("failed to asynchronously prepare wasm: "+n),xn(n)}))}function u(){if(o["wasmBinary"]||"function"!==typeof WebAssembly.instantiateStreaming||on(un)||"function"!==typeof fetch)return i(r);fetch(un,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(r,(function(n){g("wasm streaming compile failed: "+n),g("falling back to ArrayBuffer instantiation"),i(r)}))}))}if(en("wasm-instantiate"),o["instantiateWasm"])try{return o["instantiateWasm"](e,t)}catch(a){return g("Module.instantiateWasm callback failed with error: "+a),!1}return u(),{}}on(un)||(un=h(un)),o["asm"]=function(n,e,t){e["memory"]=v,e["table"]=new WebAssembly.Table({initial:12,maximum:12,element:"anyfunc"}),e["__memory_base"]=1024,e["__table_base"]=0;var r=cn(e);return r};var sn={buffers:[null,[],[]],printChar:function(n,e){var t=sn.buffers[n];0===e||10===e?((1===n?m:g)(E(t,0)),t.length=0):t.push(e)},varargs:0,get:function(n){sn.varargs+=4;var e=O[sn.varargs-4>>2];return e},getStr:function(){var n=R(sn.get());return n},get64:function(){var n=sn.get();sn.get();return n},getZero:function(){sn.get()}};function ln(n,e){sn.varargs=e;try{sn.getStreamFromFD(),sn.get(),sn.get(),sn.get(),sn.get();return 0}catch(t){return"undefined"!==typeof FS&&t instanceof FS.ErrnoError||xn(t),-t.errno}}function pn(n,e){sn.varargs=e;try{for(var t=sn.get(),r=sn.get(),o=sn.get(),i=0,u=0;u<o;u++){for(var a=O[r+8*u>>2],f=O[r+(8*u+4)>>2],c=0;c<f;c++)sn.printChar(t,j[a+c]);i+=f}return i}catch(s){return"undefined"!==typeof FS&&s instanceof FS.ErrnoError||xn(s),-s.errno}}function dn(n,e){sn.varargs=e;try{return 0}catch(t){return"undefined"!==typeof FS&&t instanceof FS.ErrnoError||xn(t),-t.errno}}function yn(n,e){sn.varargs=e;try{sn.getStreamFromFD();return 0}catch(t){return"undefined"!==typeof FS&&t instanceof FS.ErrnoError||xn(t),-t.errno}}function hn(){return x.length}function mn(n){var e=gn,t=e.LLVM_SAVEDSTACKS[n];e.LLVM_SAVEDSTACKS.splice(n,1),kn(t)}function gn(){var n=gn;return n.LLVM_SAVEDSTACKS||(n.LLVM_SAVEDSTACKS=[]),n.LLVM_SAVEDSTACKS.push(Mn()),n.LLVM_SAVEDSTACKS.length-1}function vn(n,e,t){j.set(j.subarray(e,e+t),n)}function bn(n){return o["___errno_location"]&&(O[o["___errno_location"]()>>2]=n),n}function wn(n){xn("OOM")}function An(n){var e=65536;n=P(n,e);var t=L.byteLength;try{var r=v.grow((n-t)/65536);return-1!==r&&(L=v.buffer,!0)}catch(o){return!1}}function Sn(n){var e=hn(),t=65536,r=2147483648-t;if(n>r)return!1;var o=16777216,i=Math.max(e,o);while(i<n)i=i<=536870912?P(2*i,t):Math.min(P((3*i+2147483648)/4,t),r);return!!An(i)&&(I(),!0)}var Tn={},_n={d:xn,f:bn,l:ln,e:pn,k:dn,j:yn,i:hn,h:vn,g:Sn,b:mn,c:gn,m:wn,a:D},En=o["asm"](Tn,_n,L);o["asm"]=En;o["___errno_location"]=function(){return o["asm"]["n"].apply(null,arguments)},o["_cleanup"]=function(){return o["asm"]["o"].apply(null,arguments)},o["_decode"]=function(){return o["asm"]["p"].apply(null,arguments)},o["_decode_buf"]=function(){return o["asm"]["q"].apply(null,arguments)},o["_encode_buf"]=function(){return o["asm"]["r"].apply(null,arguments)},o["_init"]=function(){return o["asm"]["s"].apply(null,arguments)};var Rn=o["stackAlloc"]=function(){return o["asm"]["t"].apply(null,arguments)},kn=o["stackRestore"]=function(){return o["asm"]["u"].apply(null,arguments)},Mn=o["stackSave"]=function(){return o["asm"]["v"].apply(null,arguments)};function Cn(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}function Ln(n){function e(){o["calledRun"]||(o["calledRun"]=!0,w||(G(),X(),o["onRuntimeInitialized"]&&o["onRuntimeInitialized"](),Y()))}n=n||o["arguments"],J>0||(N(),J>0||o["calledRun"]||(o["setStatus"]?(o["setStatus"]("Running..."),setTimeout((function(){setTimeout((function(){o["setStatus"]("")}),1),e()}),1)):e()))}function xn(n){throw o["onAbort"]&&o["onAbort"](n),void 0!==n?(m(n),g(n),n='"'+n+'"'):n="",w=!0,1,"abort("+n+"). Build with -s ASSERTIONS=1 for more info."}if(o["asm"]=En,o["ccall"]=T,o["then"]=function(n){if(o["calledRun"])n(o);else{var e=o["onRuntimeInitialized"];o["onRuntimeInitialized"]=function(){e&&e(),n(o)}}return o},Cn.prototype=new Error,Cn.prototype.constructor=Cn,nn=function n(){o["calledRun"]||Ln(),o["calledRun"]||(nn=n)},o["run"]=Ln,o["abort"]=xn,o["preInit"]){"function"==typeof o["preInit"]&&(o["preInit"]=[o["preInit"]]);while(o["preInit"].length>0)o["preInit"].pop()()}return o["noExitRuntime"]=!0,Ln(),o}}();e["a"]=o}).call(this,t("f28c"),"/")},cf80:function(n,e,t){"use strict";t.r(e);var r=t("8483");let o;const i=960,u=5*i,a=2*u;let f,c,s=new Float32Array(a),l=0,p=!1;const d=Object(r["a"])({onRuntimeInitialized:function(){d.ccall("init","number");const n=d.ccall("encode_buf","number"),e=d.ccall("decode_buf","number");f=new Uint8Array(d.HEAPU8.buffer,n),c=new Float32Array(d.HEAPF32.buffer,e),p=!0,console.log("[AudioWorker] Opus is ready!")}});function y(n=!1){postMessage({buf:s.buffer,len:n?0:l},[s.buffer]),s=new Float32Array(a),l=0}function h(n){f.set(new Uint8Array(n));const e=d.ccall("decode","number",["number"],[n.byteLength]);for(let t=0;t<2*e;++t)s[l++]=c[t];l===a&&y()}function m(n){if(n.key){try{o.close()}catch(e){}o=new WebSocket("wss://sarisia.cc/stream/"),o.binaryType="arraybuffer",o.onopen=()=>{o.send(n.key),console.log("[AudioWorker] Connected")},o.onmessage=n=>{p&&h(n.data)}}}function g(){y(!0)}function v(){try{o.close(),console.log("[AudioWorker] WS has killed!")}catch(n){}}onmessage=n=>{const e=n.data;switch(console.log(`[AudioWorker] received: ${e.op}`),e.op){case"connect":m(e);break;case"flush":g();break;case"kill":v();break;default:break}}},df7c:function(n,e,t){(function(n){function t(n,e){for(var t=0,r=n.length-1;r>=0;r--){var o=n[r];"."===o?n.splice(r,1):".."===o?(n.splice(r,1),t++):t&&(n.splice(r,1),t--)}if(e)for(;t--;t)n.unshift("..");return n}function r(n){"string"!==typeof n&&(n+="");var e,t=0,r=-1,o=!0;for(e=n.length-1;e>=0;--e)if(47===n.charCodeAt(e)){if(!o){t=e+1;break}}else-1===r&&(o=!1,r=e+1);return-1===r?"":n.slice(t,r)}function o(n,e){if(n.filter)return n.filter(e);for(var t=[],r=0;r<n.length;r++)e(n[r],r,n)&&t.push(n[r]);return t}e.resolve=function(){for(var e="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var u=i>=0?arguments[i]:n.cwd();if("string"!==typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(e=u+"/"+e,r="/"===u.charAt(0))}return e=t(o(e.split("/"),(function(n){return!!n})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(n){var r=e.isAbsolute(n),u="/"===i(n,-1);return n=t(o(n.split("/"),(function(n){return!!n})),!r).join("/"),n||r||(n="."),n&&u&&(n+="/"),(r?"/":"")+n},e.isAbsolute=function(n){return"/"===n.charAt(0)},e.join=function(){var n=Array.prototype.slice.call(arguments,0);return e.normalize(o(n,(function(n,e){if("string"!==typeof n)throw new TypeError("Arguments to path.join must be strings");return n})).join("/"))},e.relative=function(n,t){function r(n){for(var e=0;e<n.length;e++)if(""!==n[e])break;for(var t=n.length-1;t>=0;t--)if(""!==n[t])break;return e>t?[]:n.slice(e,t-e+1)}n=e.resolve(n).substr(1),t=e.resolve(t).substr(1);for(var o=r(n.split("/")),i=r(t.split("/")),u=Math.min(o.length,i.length),a=u,f=0;f<u;f++)if(o[f]!==i[f]){a=f;break}var c=[];for(f=a;f<o.length;f++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(n){if("string"!==typeof n&&(n+=""),0===n.length)return".";for(var e=n.charCodeAt(0),t=47===e,r=-1,o=!0,i=n.length-1;i>=1;--i)if(e=n.charCodeAt(i),47===e){if(!o){r=i;break}}else o=!1;return-1===r?t?"/":".":t&&1===r?"/":n.slice(0,r)},e.basename=function(n,e){var t=r(n);return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t},e.extname=function(n){"string"!==typeof n&&(n+="");for(var e=-1,t=0,r=-1,o=!0,i=0,u=n.length-1;u>=0;--u){var a=n.charCodeAt(u);if(47!==a)-1===r&&(o=!1,r=u+1),46===a?-1===e?e=u:1!==i&&(i=1):-1!==e&&(i=-1);else if(!o){t=u+1;break}}return-1===e||-1===r||0===i||1===i&&e===r-1&&e===t+1?"":n.slice(e,r)};var i="b"==="ab".substr(-1)?function(n,e,t){return n.substr(e,t)}:function(n,e,t){return e<0&&(e=n.length+e),n.substr(e,t)}}).call(this,t("f28c"))},f28c:function(n,e){var t,r,o=n.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(n){if(t===setTimeout)return setTimeout(n,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(n,0);try{return t(n,0)}catch(e){try{return t.call(null,n,0)}catch(e){return t.call(this,n,0)}}}function f(n){if(r===clearTimeout)return clearTimeout(n);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(n);try{return r(n)}catch(e){try{return r.call(null,n)}catch(e){return r.call(this,n)}}}(function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(n){t=i}try{r="function"===typeof clearTimeout?clearTimeout:u}catch(n){r=u}})();var c,s=[],l=!1,p=-1;function d(){l&&c&&(l=!1,c.length?s=c.concat(s):p=-1,s.length&&y())}function y(){if(!l){var n=a(d);l=!0;var e=s.length;while(e){c=s,s=[];while(++p<e)c&&c[p].run();p=-1,e=s.length}c=null,l=!1,f(n)}}function h(n,e){this.fun=n,this.array=e}function m(){}o.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];s.push(new h(n,e)),1!==s.length||l||a(y)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(n){return[]},o.binding=function(n){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(n){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}});
//# sourceMappingURL=a402a5f0f390803bd570.worker.js.map